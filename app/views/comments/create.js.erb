<%# TODO: pasar esta lÃ³gica a Backbone %>
<% if @comment %>
  <% if @comment.response_to_id? %>
    var field_comment = $('#responses-to-comment-<%= @comment.response_to_id %>');
    var form = field_comment.find('form');
    var textarea = form.find('textarea');
    form_answer = field_comment.find('.discussion-entry').first();
  <% else %>
    var form = $(".comment-form");
    var field_comment = $('.comments');
    var textarea = form.find('#comment-input');
  <% end %>

  <% if @comment.valid? %>

    if(typeof form_answer !== 'undefined'){
      form_answer.remove();
    }

    field_comment.prepend('<%= j render("/comments/comment", comment: @comment) %>');
    textarea.val('');
    form.find('.label-danger').hide();
    textarea.removeAttr('style');
  <% else %>
    form.find('.label-danger').show();
    textarea.css("border", "1px solid red");
  <% end %>
<% end %>
